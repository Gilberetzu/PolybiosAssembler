LITERALR1 VideoLayer l
SVR 1 0
SUBI 1 64512
SVR 1 1
LITERALR1 StackPointer l
SSP 1
JUMPI Start l
-- PreviousStartFrame
DB 0 0 0 0

//CALLI consoleNameFn l
-- Start
CALLI RenderAnimFn l
CALLI BigLogoAnimFn l
GVR 2 9
LITERALR1 PreviousStartFrame l
STORE 1 2 0

-- WhileStart
GVR 2 9
LITERALR1 PreviousStartFrame l
LOAD 1 3
EQUAL 2 3 0
JUMPI Start l
JUMPI WhileStart l

-- RenderAnimParams
//Position X
DB 0 0 0 8
//Position Y
DB 0 0 0 125
//Start Frame
DB 0 0 0 0

-- RenderAnimFn
LITERALR1 RenderAnimParams l
//Reg 2 has pos x
LOAD 1 2
ADDI 1 1
//Reg 3 has pos y
LOAD 1 3
ADDI 1 1
//Reg 4 has start frame
LOAD 1 4
LITERALR1 RenderAnimData l
//Reg 5 has the sprite data start position
MOV 1 5
LITERALR1 VideoLayer l
//Reg 6 has the video layer position
MOV 1 6
//Reg 7 has the current frame
GVR 7 9
SUB 7 4 8
//Reg 8 has the current animation frame number
SRL 8 2 8 0
//Reg 9 has the current frame animation offset
LITERALR1 64
MOV 8 9
MUL 9 1 9
ADD 5 9 10
LITERALR1 1
SSTC 1
LS 10 6 3 2 3
LITERALR1 0
SSTC 1
LITERALR1 8
GREATER 8 1 0
JUMPI RenderAnimElse l
//If body
LITERALR1 RenderAnimParams l
ADDI 1 2
STORE 1 7 0
-- RenderAnimElse
RETURN

//This is an Sprite animation
-- RenderAnimData
SPRITE_ANIM ./logoAnim 16x16

-- BigLogoAnimPositionData
//Sprite collection base position
DB 0 0 0 8
DB 0 0 0 32
//Position s0
DB 0 0 0 0
DB 0 0 0 0
//Position s1
DB 0 0 0 4
DB 0 0 0 0
//Position s2
DB 0 0 0 8
DB 0 0 0 0
//Position s3
DB 0 0 0 12
DB 0 0 0 0
//Position s4
DB 0 0 0 16
DB 0 0 0 0
-- BigLogoAnimStartFrame
DB 0 0 0 0
-- BigLogoAnimFn
LITERALR1 VideoLayer l
//The base layer is on register 2
MOV 1 2
LITERALR1 BigLogoAnimPositionData l
LOAD 1 3
ADDI 1 1
LOAD 1 4
//Registers 3 and 4 have the horizontal and vertical base positions respectively
ADDI 1 1
MOV 1 5
//Register 5 has the start of the offset position of the sprite sections
MOV 0 6
//Register 6 is the index of the for loop
MOV 5 7
//Register 7 has the start position offset

//Calculate the current frame number
LITERALR1 BigLogoAnimStartFrame l
LOAD 1 10
GVR 11 9
SUB 11 10 10
SRL 10 2 10 0
//Register 10 has the current frame
//Register 10 has the current animation frame

-- forStart
LOAD 7 8
ADDI 7 1
LOAD 7 9
ADDI 7 1
ADD 8 3 8
ADD 9 4 9
//8 and 9 have the Vertical and horizontal positions of the current sprite section
MOV 6 12
MULI 12 64
MOV 10 16
MULI 16 320
ADD 16 12 14
LITERALR1 BigLogoAnimData l
ADD 1 14 14
//Reg 14 has the start register of the current frame section for the current frame
LITERALR1 1
SSTC 1
LS 14 2 3 8 9
LITERALR1 0
SSTC 1
ADDI 6 1
LITERALR1 5
LESS 6 1 0
JUMPI outForSections l
JUMPI forStart l
//Out of the for loop
-- outForSections
LITERALR1 19
LESS 10 1 0
JUMPI BigLogoAnimReset l
RETURN
-- BigLogoAnimReset
GVR 18 9
LITERALR1 BigLogoAnimStartFrame l
STORE 1 18 0
RETURN
-- BigLogoAnimData
SPRITE_ANIM_SECTION ./bigLogoAnim 16x16 5 1 20

//placeImageOverMultipleSprites consoleName ./Assets/ConsoleName.png 8 52 7 4 16x16

-- Eraser
fillSpace 64 0 0 0 0
-- StackPointer
fillSpace 1280 0 0 0 0
-- VideoLayer